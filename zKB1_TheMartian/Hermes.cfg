//////////////////////// RESOURCES
@PART[hermesCrewModule*]:NEEDS[FeatureHabitat]:BEFORE[KerbalismDefault]
{
	%CrewCapacity = 2
	RESOURCE
    {
        name = Oxygen
        amount = 20000
        maxAmount = 40000
    }
	RESOURCE
    {
        name = Food
        amount = 250
        maxAmount = 500
    }
	RESOURCE
    {
        name = Water
        amount = 25
        maxAmount = 50
    }
	RESOURCE
    {
        name = Nitrogen
        amount = 22000
        maxAmount = 50000
    }
}
@PART[hermesCrewModule*,hermesDockingHub,sspx-habitation-1875-1]:NEEDS[FeatureHabitat]:BEFORE[KerbalismDefault]
{
	RESOURCE
    {
        name = Hydrazine
        amount = 20
        maxAmount = 20
    }
}
@PART[hermesRCS]:AFTER[zzzKerbalismDefault]
{
	RESOURCE
    {
        name = Hydrazine
        amount = 2000
        maxAmount = 2000
    }
}

//////////////////////// UTILITY
@PART[hermesAntenna]:NEEDS[RemoteTech]:AFTER[zzzKerbalismDefault]
{
	%TechRequired = specializedElectrics
	%MODULE[ModuleRTAntenna] 
	{
		%Mode0DishRange = 0
		%Mode1DishRange = 350000000000
		%EnergyCost = 2.60
		%DishAngle = 0.006
		
		%TRANSMITTER {
			%PacketInterval = 0.3
			%PacketSize = 2
			%PacketResourceCost = 15.0
		}
	}
	
	%MODULE[ModuleSPUPassive] {}
}

@PART[hermesFuelTank]:AFTER[zzzKerbalismDefault]
{
	@RESOURCE[XenonGas]
	{
		%amount = 2000000
		%maxAmount = 3000000
    }
}

@PART[hermesReactor]:AFTER[zzzKerbalismDefault]
{
	%CrewCapacity = 1
	MODULE
	{
			name = Emitter
			radiation = 0.000055555 // 0.2 rad/h
	}

	MODULE:NEEDS[ProfileDefault]
	{
			name = ProcessController
			resource = _ECGen
			title = Fission EC Generator
			capacity = 3500.1
			running = true
			toggle = true
	}

	!MODULE[ModuleGenerator] {}
	!MODULE[ModuleCoreHeat] {}
}

//////////////////////// LIVING SPACE & IVA
@PART[hermes*]:HAS[!MODULE[ModuleConnectedLivingSpace]]:NEEDS[ConnectedLivingSpace]
{
	MODULE
	{
		name = ModuleConnectedLivingSpace
		passable = true
		passableWhenSurfaceAttached = true
	}
}
@PART[hermes*]:HAS[!MODULE[ModuleFreeIva]]:NEEDS[FreeIVA]
{
	MODULE
	{
		name = ModuleFreeIva
		requireDeploy = false
	}
}

//////////////////////// INTERNALS
@PART[hermesCockpit]:NEEDS[FreeIVA,StationPartsExpansionReduxIVAs]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = sspx-core-375-1-iva
	}
}

@PART[hermesUtilityModule]:NEEDS[FreeIVA]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = crewCabinInternals
	}
}

@PART[hermesCrewModule*]:NEEDS[FreeIVA,StationPartsExpansionReduxIVAs]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = sspx-habitation-125-1-iva
	}
}

@PART[hermesDockingHub,hermesHub]:NEEDS[FreeIVA,StationPartsExpansionReduxIVAs]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = FreeIva_sspx-hub-125-1-iva_Regular
	}
}

@PART[hermesTrussSegment,hermesFrontSpacer]:NEEDS[FreeIVA,StationPartsExpansionReduxIVAs]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = FreeIva_sspx-tube-125-1-iva
	}
}

@PART[hermesFuelTank,hermesRCS]:NEEDS[FreeIVA,StationPartsExpansionReduxIVAs]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = sspx-utility-1875-1-iva
	}
}

@PART[hermesElectricalModule]:NEEDS[FreeIVA,StationPartsExpansionReduxIVAs]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = sspx-utility-125-1-iva
	}
}

@PART[hermesCommsModule]:NEEDS[FreeIVA,StationPartsExpansionReduxIVAs]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = sspx-core-25-1-iva
	}
}

@PART[hermesReactor]:NEEDS[FreeIVA,StationPartsExpansionReduxIVAs]:AFTER[zzzKerbalismDefault]
{
	%INTERNAL
	{
		%name = sspx-lab-375-1-iva
	}
}

//////////////////////// COMFORT
RESOURCE_DEFINITION
{
  name = _HabTV
  density = 0.0
  isVisible = false
}
RESOURCE_DEFINITION
{
  name = _HabShower
  density = 0.0
  isVisible = false
}
RESOURCE_DEFINITION
{
  name = _HabGym
  density = 0.0
  isVisible = false
}

Profile
{
	name = KerbalismSupport
	modname = KB1_TheMartian
	moddir = zKB1_TheMartian
	
	Process
	{
		name = habitat tv
		title = #KERBALISM_Process_TranquilizingVortex
		modifier = _HabTV
		input = ElectricCharge@0.057 
		cures = stress@0.00003
	}
	Process
	{
		name = habitat shower
		title = #KERBALISM_Process_ZeroGravityShower
		modifier = _HabShower
		input = ElectricCharge@0.014049975308642
		input = Water@0.0000839507
		output = WasteWater@0.0000839507
		interval = 64800.0 // one shower every 18 hours / 3 days
		cures = stress@0.0004
	}
	Process
	{
		name = habitat gym
		title = #KERBALISM_Process_TranquilizingVortex
		modifier = _HabGym
		input = ElectricCharge@0.057 
		interval = 64800.0 // one workout every 18 hours / 3 days
		cures = stress@0.0005
	}
}

@PART[sspx-expandable-centrifuge-375-1]:NEEDS[FeatureHabitat,FeatureComfort]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: sickbay shower : 
	@tags ^= :$: sickbay gym : 

	!MODULE[Sickbay]:HAS[#resource[_SickbayTV]] {}
	MODULE
	{
		name = Sickbay
		resource = _HabTV
		title = TV
		desc = Binge watch some shows, maybe watch The Martian
		mass = 0.001
		cost = 50
		cureEverybody = True
	}
	MODULE
	{
		name = Sickbay
		resource = _HabGym
		title = Gym
		desc = Workout in the spinning habitat
		mass = 0.001
		cost = 500
		slots = 2
	}
	MODULE
	{
		name = Reliability
		type = Sickbay
		title = Gym
		redundancy = Life Support
		repair = true // anyone 
		mtbf = 31536000
		
		extra_cost = 0.005
		extra_mass = 0.001
	} 

	MODULE
	{
		name = Sickbay
		resource = _HabShower
		title = Shower
		desc = Running water feels nice on the skin
		mass = 0.001
		cost = 800
		slots = 1
	}
	MODULE
	{
		name = Reliability
		type = Sickbay
		title = Shower
		redundancy = Life Support
		repair = true // anyone 
		mtbf = 21536000
		extra_cost = 0.005
		extra_mass = 0.001
	} 
}

@PART[hermesCrewModule]:NEEDS[FeatureHabitat,FeatureComfort]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: sickbay laundry: 

	MODULE
	{
		name = Sickbay
		resource = _SickbayLaundry
		title = Laundry
		desc = Clean your dirty laundry
		mass = 0.250
		cost = 65000
		slots = 3
	}
	MODULE
	{
		name = Reliability
		type = Sickbay
		title = Laundry
		redundancy = Life Support
		repair = Engineer
		mtbf = 11536000
		extra_cost = 0.25
		extra_mass = 0.08
	} 
}



